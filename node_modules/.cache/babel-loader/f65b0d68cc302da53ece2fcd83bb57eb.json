{"ast":null,"code":"var _jsxFileName = \"/home/lnv146/React-query/udemy-REACT-QUERY/completed-apps/infinite-swapi/src/species/InfiniteSpecies.jsx\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport { useInfiniteQuery } from \"react-query\";\nimport { Species } from \"./Species\";\nconst initialUrl = \"https://swapi.dev/api/species/\";\nconst fetchUrl = async url => {\n  const response = await fetch(url);\n  return response.json();\n};\nexport function InfiniteSpecies() {\n  const {\n    data,\n    fetchNextPage,\n    hasNextPage,\n    isLoading,\n    isFetching,\n    isError,\n    error\n  } = useInfiniteQuery(\"sw-species\", _ref => {\n    let {\n      pageParam = initialUrl\n    } = _ref;\n    return fetchUrl(pageParam);\n  }, {\n    getNextPageParam: lastPage => lastPage.next || undefined\n  });\n  if (isLoading) return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 25\n    }\n  }, \"Loading...\");\n  if (isError) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 23\n    }\n  }, \"Error! \", error.toString());\n  return /*#__PURE__*/React.createElement(React.Fragment, null, isFetching && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 22\n    }\n  }, \"Loading...\"), /*#__PURE__*/React.createElement(InfiniteScroll\n  // add initialLoad={false} to prevent loading two pages on\n  // component mount (see\n  // https://www.udemy.com/course/learn-react-query/learn/#questions/18222646/)\n  , {\n    initialLoad: false,\n    loadMore: fetchNextPage,\n    hasMore: hasNextPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, data.pages.map(pageData => {\n    return pageData.results.map(species => {\n      return /*#__PURE__*/React.createElement(Species, {\n        key: species.name,\n        name: species.name,\n        language: species.language,\n        averageLifespan: species.average_lifespan,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 15\n        }\n      });\n    });\n  })));\n}","map":{"version":3,"names":["InfiniteScroll","useInfiniteQuery","Species","initialUrl","fetchUrl","url","response","fetch","json","InfiniteSpecies","data","fetchNextPage","hasNextPage","isLoading","isFetching","isError","error","_ref","pageParam","getNextPageParam","lastPage","next","undefined","React","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","toString","Fragment","initialLoad","loadMore","hasMore","pages","map","pageData","results","species","key","name","language","averageLifespan","average_lifespan"],"sources":["/home/lnv146/React-query/udemy-REACT-QUERY/completed-apps/infinite-swapi/src/species/InfiniteSpecies.jsx"],"sourcesContent":["import InfiniteScroll from \"react-infinite-scroller\";\nimport { useInfiniteQuery } from \"react-query\";\n\nimport { Species } from \"./Species\";\n\nconst initialUrl = \"https://swapi.dev/api/species/\";\nconst fetchUrl = async (url) => {\n  const response = await fetch(url);\n  return response.json();\n};\n\nexport function InfiniteSpecies() {\n  const {\n    data,\n    fetchNextPage,\n    hasNextPage,\n    isLoading,\n    isFetching,\n    isError,\n    error,\n  } = useInfiniteQuery(\n    \"sw-species\",\n    ({ pageParam = initialUrl }) => fetchUrl(pageParam),\n    {\n      getNextPageParam: (lastPage) => lastPage.next || undefined,\n    }\n  );\n\n  if (isLoading) return <div className=\"loading\">Loading...</div>;\n  if (isError) return <div>Error! {error.toString()}</div>;\n\n  return (\n    <>\n      {isFetching && <div className=\"loading\">Loading...</div>}\n      <InfiniteScroll\n        // add initialLoad={false} to prevent loading two pages on\n        // component mount (see\n        // https://www.udemy.com/course/learn-react-query/learn/#questions/18222646/)\n        initialLoad={false}\n        loadMore={fetchNextPage}\n        hasMore={hasNextPage}\n      >\n        {data.pages.map((pageData) => {\n          return pageData.results.map((species) => {\n            return (\n              <Species\n                key={species.name}\n                name={species.name}\n                language={species.language}\n                averageLifespan={species.average_lifespan}\n              />\n            );\n          });\n        })}\n      </InfiniteScroll>\n    </>\n  );\n}\n"],"mappings":";AAAA,OAAOA,cAAc,MAAM,yBAAyB;AACpD,SAASC,gBAAgB,QAAQ,aAAa;AAE9C,SAASC,OAAO,QAAQ,WAAW;AAEnC,MAAMC,UAAU,GAAG,gCAAgC;AACnD,MAAMC,QAAQ,GAAG,MAAOC,GAAG,IAAK;EAC9B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAG,CAAC;EACjC,OAAOC,QAAQ,CAACE,IAAI,CAAC,CAAC;AACxB,CAAC;AAED,OAAO,SAASC,eAAeA,CAAA,EAAG;EAChC,MAAM;IACJC,IAAI;IACJC,aAAa;IACbC,WAAW;IACXC,SAAS;IACTC,UAAU;IACVC,OAAO;IACPC;EACF,CAAC,GAAGf,gBAAgB,CAClB,YAAY,EACZgB,IAAA;IAAA,IAAC;MAAEC,SAAS,GAAGf;IAAW,CAAC,GAAAc,IAAA;IAAA,OAAKb,QAAQ,CAACc,SAAS,CAAC;EAAA,GACnD;IACEC,gBAAgB,EAAGC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,IAAIC;EACnD,CACF,CAAC;EAED,IAAIT,SAAS,EAAE,oBAAOU,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC,SAAS;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,YAAe,CAAC;EAC/D,IAAIhB,OAAO,EAAE,oBAAOQ,KAAA,CAAAC,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAK,SAAO,EAACf,KAAK,CAACgB,QAAQ,CAAC,CAAO,CAAC;EAExD,oBACET,KAAA,CAAAC,aAAA,CAAAD,KAAA,CAAAU,QAAA,QACGnB,UAAU,iBAAIS,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC,SAAS;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,YAAe,CAAC,eACxDR,KAAA,CAAAC,aAAA,CAACxB;EACC;EACA;EACA;EAAA;IACAkC,WAAW,EAAE,KAAM;IACnBC,QAAQ,EAAExB,aAAc;IACxByB,OAAO,EAAExB,WAAY;IAAAc,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEpBrB,IAAI,CAAC2B,KAAK,CAACC,GAAG,CAAEC,QAAQ,IAAK;IAC5B,OAAOA,QAAQ,CAACC,OAAO,CAACF,GAAG,CAAEG,OAAO,IAAK;MACvC,oBACElB,KAAA,CAAAC,aAAA,CAACtB,OAAO;QACNwC,GAAG,EAAED,OAAO,CAACE,IAAK;QAClBA,IAAI,EAAEF,OAAO,CAACE,IAAK;QACnBC,QAAQ,EAAEH,OAAO,CAACG,QAAS;QAC3BC,eAAe,EAAEJ,OAAO,CAACK,gBAAiB;QAAApB,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,CAC3C,CAAC;IAEN,CAAC,CAAC;EACJ,CAAC,CACa,CAChB,CAAC;AAEP"},"metadata":{},"sourceType":"module"}